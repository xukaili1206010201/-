<script>
  var allHeight = $(window).height() - $('.navigationbar').outerHeight()
    - $('.myorder-tabs').outerHeight() - $('.my-button-group').outerHeight();
  $('.all-msg').css({
    'height': allHeight + 'px',
    'overflow': 'scroll'
  });
  $('.topay-msg').css({
    'height': allHeight + 'px',
    'overflow': 'scroll'
  });
  $('.tosend-msg').css({
    'height': allHeight + 'px',
    'overflow': 'scroll'
  });
  $('.tobackmoney-msg').css({
    'height': allHeight + 'px',
    'overflow': 'scroll'
  });
  $('.alsend-msg').css({
    'height': allHeight + 'px',
    'overflow': 'scroll'
  });
  $('.toback-msg').css({
    'height': allHeight + 'px',
    'overflow': 'scroll'
  });
  $('.finish-msg').css({
    'height': allHeight + 'px',
    'overflow': 'scroll'
  });
  $('.alback-msg').css({
    'height': allHeight + 'px',
    'overflow': 'scroll'
  });
  var contentH = $('.navigationbar').height() + $('.myorder-tabs').height();
  $('.order-container').css({
    'margin-top': contentH + 'px'
  });
</script>

<nav class="navbar navbar-default  navbar-fixed-top navigationbar">
  <div class="navLeft">
    <img class="back-button" src="images/back_button.png" ng-click="goBack()">
  </div>
  <div class="navRight">
    <div class="search-group">
      <img class="search-button" src="images/search_button.png" ng-click="searchOrder()">
      <input class="search-input form-control" placeholder="请输入关键字搜索" ng-blur="orderBlur()">
    </div>
  </div>
</nav>

<div class="gray-body">
  <div class="navbar-fixed-top myorder-tabs">
    <ul class="myorder-tabs-ul">
      <li class="status-all" ng-click="showOrderData('7',$event,'.status-all')">全部</li>
      <li class="status-obligation selectedOrder" ng-click="showOrderData('0',$event,'.status-obligation')">待付款</li>
      <li class="status-delive" ng-click="showOrderData('1',$event,'.status-delive')">待发货</li>
      <li class="status-refund" ng-click="showOrderData('2',$event,'.status-refund')">已退款</li>
      <li class="status-aldelive" ng-click="showOrderData('3',$event,'.status-aldelive')">已发货</li>
      <li class="status-regood" ng-click="showOrderData('4',$event,'.status-regood')">待退货</li>
      <li class="status-algood" ng-click="showOrderData('6',$event,'.status-algood')">已退货</li>
      <li class="status-completed" ng-click="showOrderData('5',$event,'.status-completed')">已完成</li>
    </ul>
  </div>

  <div class="order-container">

    <!--/*------------------------------ 待付款-------------------------------------------*/-->
    <div class="topay-message-table" ng-if="showType == '0'">
      <div class="topay-msg" ng-if="!errMsg" load-more data="{params : orderParams,repeatFun : '$scope.getOrders'}">
        <div>
          <ul class="list-group" ng-repeat="obligation in orderList">

            <li class="list-group-item line order-basic-info">
              <div class="message-pic">
                <img src="images/sure-icon.png" check-all data="{type : '订单',range : '.topay-message-table'}"
                     class="sure orderSure">
                <span class="myOrder-orderId" ng-hide="true">{{obligation.order_id}}</span>
              </div>

              <div class="order-message-text" ng-click="goOrderDetail(obligation.order_id,$event)">
                <!--<p class="">-->
                  <!--{{obligation.city}}<span class="myorder-shop">{{obligation.business}}</span>-->
                  <!--<span class="order-status">{{obligation.status}}</span>-->
                <!--</p>-->

                <div class="order-basic-second">
                  <p>
                    {{obligation.city}}<span class="myorder-shop">{{obligation.business}}</span>
                    <span class="order-status">{{obligation.status}}</span>
                  </p>
                  <p class="secondChild"><span class="allmoney">&#165 {{obligation.sum}}</span></p>
                </div>

                <p>订单号：<span class="order_no">{{obligation.order_no}}</span></p>

                <p class="">下单时：{{obligation.order_date}}</p>

                <p class="" ng-if="obligation.remark">备注：{{obligation.remark}}</p>
              </div>
            </li>
            <li class="list-group-item" ng-repeat="good in obligation.goods">

              <div class="myorder-selectedornot">

                  <div class="message-pic">
                    <p>
                      <span class="good-status" ng-hide="true">{{good.status}}</span>
                      <img src="images/sure-icon.png" class="sure goodSure" check-good
                           data="{range : '.topay-message-table'}">
                      <span ng-hide="true" class="orderGoodsId">{{good.orderItem_id}}</span>
                    </p>
                    <span ng-hide="true">{{good}}</span>
                  </div>

              </div>

              <div class="myorder-goods-info" ng-click="toGoodsDetail(good)">
                <div class="product-pic">
                  <img ng-src="{{good.imageUrl}}">
                </div>
                <div class="list-text">
                  <p class="product-name">
                    <span class="product-good">{{good.name}}</span>
                    <span class="station">{{good.status}}</span>
                  </p>

                  <div class="myorder-goods-sepc">
                    <span style="float:left">{{good.guige_1}}</span>
                    <span style="float:left">{{good.guige_2}}</span>
                  </div>
                  <div class="myorder-goods-pricecount">
                    <span class="price">&#165 {{good.sale_price}}</span>
                    <span class="myorder-count">X{{good.count}}{{good.unit}}</span>
                  </div>

                </div>

                <div class="size order-guige">
                  <p ng-if="good.delivery">送货方式：
                    <span ng-if ="good.service_station.indexOf('服务站')>-1">{{good.delivery}}({{good.service_station}})</span>
                    <span ng-if="good.service_station.indexOf('服务站') <= -1">{{good.delivery}}</span>
                  </p>
                  <p ng-show="good.coupons!=''">优惠额：<span class="moneyColor">&#165{{good.coupons}}</span></p>
                  <p ng-if="good.address">订购小区：{{good.address}}</p>

                  <div class="note-message">
                    <p class="notetext">
                      <span ng-if="good.remark">备注：{{good.remark}}</span>
                    </p>

                    <p class="notetext" ng-show="good.error.length > 0">
                      <span>失效原因：<span class="myorder-goods-invalid">{{good.error}}</span></span>
                    </p>

                  </div>

                </div>
              </div>

            </li>

          </ul>
        </div>
      </div>
      <div class="errMsg errBg" ng-if="errMsg">{{errMsg}}</div>
      <div class="navbar-fixed-bottom my-button-group ">
        <div class="button-group-left1">
          <p class="labletext"><span class="message-pic all-select-button">
        <img src="images/sure-icon.png" check-all data="{type : '全选',range : '.topay-message-table'}"
             class="all"></span>全选</p>
        </div>

        <div class="button-group-right1">
          <div class="edit-group">
            <button type="button" class="btn btn-danger" ng-click="isSureDelete('.topay-message-table')">删除
            </button>
          </div>
          <div class="edit-group">
            <button type="button" class="btn btn-success" ng-click="goToPay('.topay-message-table')">支付</button>
          </div>
        </div>

      </div>
    </div>
    <!---------------------------------已退款--------------------------------------------->
    <div class="tobackmoney-message-table" ng-if="showType == '2'">
      <div class="tobackmoney-msg" ng-if="!errMsg" load-more data="{params : orderParams,repeatFun : '$scope.getOrders'}">
        <div>
          <ul class="list-group" ng-repeat="waitRefund in orderList">

            <li class="list-group-item line order-basic-info">

              <div class="message-pic">
                <img src="images/sure-icon.png" class="sure order-status orderSure" check-all data="{type : '订单',range : '.tobackmoney-message-table'}">
                <span class="myOrder-orderId" ng-hide="true">{{waitRefund.order_id}}</span>
              </div>

              <div class="order-message-text" ng-click="goOrderDetail(waitRefund.order_id,$event)">


                <div class="order-basic-second">
                  <p>
                    {{waitRefund.city}}<span class="myorder-shop">{{waitRefund.business}}</span>
                  </p>
                  <p class="secondChild"><span class="allmoney">&#165 {{waitRefund.sum}}</span></p>
                </div>

                <div class="order-basic-second">
                  <p>订单号：<span class="order_no">{{waitRefund.order_no}}</span></p>
                  <p class="secondChild" ng-hide ="waitRefund.youhui == 0">
                    <span class="allmoney">优惠：&#165 {{waitRefund.youhui}}</span>
                  </p>
                </div>

                <div class="order-basic-second">
                  <p>下单时：{{waitRefund.order_date}}</p>
                  <p class="secondChild" ng-hide="waitRefund.shifu == 0">
                    <span class="allmoney">实付：&#165 {{waitRefund.shifu}}</span>
                  </p>
                </div>

                <div class="order-basic-second">
                  <p>支付时：{{waitRefund.pay_date}}</p>
                  <p class="secondChild" ng-hide="waitRefund.hide_sum == 0">
                    <span class="allmoney">隐藏额：&#165 {{waitRefund.hide_sum}}</span>
                  </p>
                </div>


                <p ng-if="waitRefund.remark">备注：{{waitRefund.remark}}</p>
              </div>
            </li>
            <li class="list-group-item" ng-repeat="good in waitRefund.goods">
              <div class="myorder-selectedornot">

                <div class="message-pic">
                  <p>
                    <span class="good-status" ng-hide="true">{{good.status}}</span>
                    <img src="images/sure-icon.png" class="sure goodSure" check-good
                         data="{range : '.topay-message-table'}">
                    <span ng-hide="true" class="orderGoodsId">{{good.orderItem_id}}</span>
                  </p>
                  <span ng-hide="true">{{good}}</span>
                </div>

              </div>
              <div class="myorder-goods-info" ng-click="toGoodsDetail(good)">
                <div class="product-pic">
                  <img ng-src="{{good.imageUrl}}">
                </div>
                <div class="list-text">
                  <p class="product-name">
                    <span class="product-good">{{good.name}}</span>
                    <span class="station">{{good.status}}</span>
                  </p>

                  <div class="myorder-goods-sepc">
                    <span style="float:left">{{good.guige_1}}</span>
                    <span style="float:left">{{good.guige_2}}</span>
                  </div>
                  <div class="myorder-goods-pricecount">
                    <span class="price">&#165 {{good.sale_price}}</span>
                    <span class="myorder-count">X{{good.count}}{{good.unit}}</span>
                  </div>

                </div>

                <div class="size order-guige">
                  <p ng-if="good.delivery">送货方式：
                    <span ng-if ="good.service_station.indexOf('服务站')>-1">{{good.delivery}}({{good.service_station}})</span>
                    <span ng-if="good.service_station.indexOf('服务站') <= -1">{{good.delivery}}</span>
                  </p>
                  <p ng-if="false">优惠券：{{good.coupons}}</p>
                  <p ng-if="good.address">订购小区：{{good.address}}</p>

                  <div class="note-message">
                    <p class="notetext">
                      <span ng-if="good.remark">备注：{{good.remark}}</span>
                    </p>

                    <p class="notetext" ng-show="good.error.length > 0">
                      <span>失效原因：<span class="myorder-goods-invalid">{{good.error}}</span></span>
                    </p>

                  </div>

                  <p class="allmoney order-goods-couponssum" ng-if="good.youhui != 0">优惠：&#165 {{good.youhui}}</p>

                </div>
              </div>
            </li>

          </ul>
        </div>
      </div>
      <div class="errMsg errBg" ng-if="errMsg">{{errMsg}}</div>
      <div class="navbar-fixed-bottom my-button-group ">
        <div class="button-group-left1">
          <p class="labletext"><span class="message-pic all-select-button">
        <img src="images/sure-icon.png" check-all data="{type : '全选',range : '.tobackmoney-message-table'}" class="all"></span>全选
          </p>
        </div>

        <div class="button-group-right1">
          <div class="edit-group">
            <button type="button" class="btn button-cancel btn-danger" ng-click="isSureDelete('.tobackmoney-message-table')">删除</button>
          </div>
          <div class="edit-group">
          <button type="button" class="btn button-cancel btn-success" ng-click="cancelRefund()">取消退款</button>
          </div>

        </div>

      </div>


    </div>

    <!-------------------------------待发货-------------------------------------------->
    <div class="tosend-message-table" ng-if="showType == '1'">
      <div class="tosend-msg" ng-if="!errMsg" load-more data="{params : orderParams,repeatFun : '$scope.getOrders'}">
        <div>
          <ul class="list-group" ng-repeat="waitDelivery in orderList">

            <li class="list-group-item line order-basic-info">

              <div class="message-pic">
                <img src="images/sure-icon.png" class="sure order-status orderSure" check-all data="{type : '订单',range : '.tosend-message-table'}">
                <span class="myOrder-orderId" ng-hide="true">{{waitDelivery.order_id}}</span>
              </div>

              <div class="order-message-text" ng-click="goOrderDetail(waitDelivery.order_id,$event)">
                <!--<p>-->
                  <!--{{waitDelivery.city}}<span class="myorder-shop">{{waitDelivery.business}}</span>-->
                <!--</p>-->


                <div class="order-basic-second">
                  <p>
                    {{waitDelivery.city}}<span class="myorder-shop">{{waitDelivery.business}}</span>
                  </p>
                  <p class="secondChild"><span class="allmoney">&#165 {{waitDelivery.sum}}</span></p>
                </div>


                <div class="order-basic-second">
                  <p>订单号：<span class="order_no">{{waitDelivery.order_no}}</span></p>
                  <p class="secondChild" ng-hide="waitDelivery.youhui == 0">
                    <span class="allmoney">优惠：&#165{{waitDelivery.youhui}}</span>
                  </p>
                </div>


                <div class="order-basic-second">
                  <p>下单时：{{waitDelivery.order_date}}</p>
                  <p class="secondChild" ng-hide="waitDelivery.shifu== 0">
                    <span class="allmoney">实付：&#165{{waitDelivery.shifu}}</span>
                  </p>
                </div>

                <div class="order-basic-second">
                  <p>支付时：{{waitDelivery.pay_date}}</p>
                  <p class="secondChild" ng-hide="waitDelivery.hide_sum == 0">
                    <span class="allmoney">隐藏额：&#165{{waitDelivery.hide_sum}}</span>
                  </p>
                </div>

                <p ng-if="waitDelivery.remark">备注：{{waitDelivery.remark}}</p>
              </div>
            </li>
            <li class="list-group-item" ng-repeat="good in waitDelivery.goods">
              <div class="myorder-selectedornot">

                <div class="message-pic">
                  <p>
                    <span class="good-status" ng-hide="true">{{good.status}}</span>
                    <img src="images/sure-icon.png" class="sure goodSure" check-good
                         data="{range : '.topay-message-table'}">
                    <span ng-hide="true" class="orderGoodsId">{{good.orderItem_id}}</span>
                  </p>
                  <span ng-hide="true">{{good}}</span>
                </div>

              </div>
              <div class="myorder-goods-info" ng-click="toGoodsDetail(good)">
                <div class="product-pic">
                  <img ng-src="{{good.imageUrl}}">
                </div>
                <div class="list-text">
                  <p class="product-name">
                    <span class="product-good">{{good.name}}</span>
                    <span class="station">{{good.status}}</span>
                  </p>

                  <div class="myorder-goods-sepc">
                    <span style="float:left">{{good.guige_1}}</span>
                    <span style="float:left">{{good.guige_2}}</span>
                  </div>
                  <div class="myorder-goods-pricecount">
                    <span class="price">&#165 {{good.sale_price}}</span>
                    <span class="myorder-count">X{{good.count}}{{good.unit}}</span>
                  </div>

                </div>

                <div class="size order-guige">
                  <p ng-if="good.delivery">送货方式：
                    <span ng-if ="good.service_station.indexOf('服务站')>-1">{{good.delivery}}({{good.service_station}})</span>
                    <span ng-if="good.service_station.indexOf('服务站') <= -1">{{good.delivery}}</span>
                  </p>
                  <p ng-if="false">优惠券：{{good.coupons}}</p>
                  <p ng-if="good.address">订购小区：{{good.address}}</p>

                  <div class="note-message">
                    <p class="notetext">
                      <span ng-if="good.remark">备注：{{good.remark}}</span>
                    </p>

                    <p class="notetext" ng-show="good.error.length > 0">
                      <span>失效原因：<span class="myorder-goods-invalid">{{good.error}}</span></span>
                    </p>

                  </div>

                  <p class="allmoney order-goods-couponssum" ng-if="good.youhui != 0">优惠：&#165 {{good.youhui}}</p>


                </div>
              </div>
            </li>

          </ul>
        </div>
      </div>
      <div class="errMsg errBg" ng-if="errMsg">{{errMsg}}</div>
      <div class="navbar-fixed-bottom my-button-group ">
        <div class="button-group-left1">
          <p class="labletext"><span class="message-pic all-select-button">
        <img src="images/sure-icon.png" check-all data="{type : '全选',range : '.tosend-message-table'}"
             class="all"></span>全选</p>
        </div>

        <div class="button-group-right1">
          <div class="edit-group">
            <button type="button" class="btn button-cancel btn-danger" ng-click="goRefund()">退款</button>
          </div>
        </div>

      </div>

    </div>

    <!----------------------------------已发货--------------------------------------------->
    <div class="alsend-message-table" ng-if="showType == '3'">
      <div class="alsend-msg" ng-if="!errMsg" load-more data="{params : orderParams,repeatFun : '$scope.getOrders'}">
        <div>
          <ul class="list-group" ng-repeat="alreadyDelivery in orderList">

            <li class="list-group-item line order-basic-info">

              <div class="message-pic">
                <img src="images/sure-icon.png" class="sure order-status orderSure" check-all data="{type : '订单',range : '.alsend-message-table'}">
                <span class="myOrder-orderId" ng-hide="true">{{alreadyDelivery.order_id}}</span>
              </div>

              <div class="order-message-text" ng-click="goOrderDetail(alreadyDelivery.order_id,$event)">
                <!--<p>-->
                  <!--{{alreadyDelivery.city}}<span class="myorder-shop">{{alreadyDelivery.business}}</span>-->
                  <!--<span class="order-status">{{alreadyDelivery.status}}</span>-->
                <!--</p>-->



                <div class="order-basic-second">
                  <p>
                    {{alreadyDelivery.city}}<span class="myorder-shop">{{alreadyDelivery.business}}</span>
                    <span class="order-status">{{alreadyDelivery.status}}</span>
                  </p>
                  <p class="secondChild"><span class="allmoney">&#165 {{alreadyDelivery.sum}}</span></p>
                </div>



                <div class="order-basic-second">
                  <p>订单号：<span class="order_no">{{alreadyDelivery.order_no}}</span></p>
                  <p class="secondChild" ng-hide="alreadyDelivery.youhui == 0">
                    <span  class="allmoney">优惠：&#165 {{alreadyDelivery.youhui}}</span>
                  </p>
                </div>


                <div class="order-basic-second">
                  <p>下单时：{{alreadyDelivery.order_date}}</p>
                  <p class="secondChild" ng-hide="alreadyDelivery.shifu == 0">
                    <span  class="allmoney">实付：&#165 {{alreadyDelivery.shifu}}</span>
                  </p>
                </div>


                <div class="order-basic-second">
                  <p>支付时：{{alreadyDelivery.pay_date}}</p>
                  <p class="secondChild" ng-hide="alreadyDelivery.hide_sum == 0">
                    <span  class="allmoney">隐藏额：&#165 {{alreadyDelivery.hide_sum}}</span>
                  </p>
                </div>


                <p class="" ng-if="alreadyDelivery.remark">备注：{{alreadyDelivery.remark}}</p>
              </div>
            </li>
            <li class="list-group-item myorder-goods-row" ng-repeat="good in alreadyDelivery.goods">
              <div class="myorder-selectedornot">

                <div class="message-pic">
                  <p>
                    <span class="good-status" ng-hide="true">{{good.status}}</span>
                    <img src="images/sure-icon.png" class="sure goodSure" check-good
                         data="{range : '.topay-message-table'}">
                    <span ng-hide="true" class="orderGoodsId">{{good.orderItem_id}}</span>
                  </p>
                  <span ng-hide="true">{{good}}</span>
                </div>

              </div>
              <div class="myorder-goods-info" ng-click="toGoodsDetail(good)">
                <div class="product-pic">
                  <img ng-src="{{good.imageUrl}}">
                </div>
                <div class="list-text">
                  <p class="product-name">
                    <span class="product-good">{{good.name}}</span>
                    <span class="station">{{good.status}}</span>
                  </p>

                  <div class="myorder-goods-sepc">
                    <span style="float:left">{{good.guige_1}}</span>
                    <span style="float:left">{{good.guige_2}}</span>
                  </div>
                  <div class="myorder-goods-pricecount">
                    <span class="price">&#165 {{good.sale_price}}</span>
                    <span class="myorder-count">X{{good.count}}{{good.unit}}</span>
                  </div>

                </div>

                <div class="size order-guige">
                  <p ng-if="good.delivery">送货方式：
                    <span ng-if ="good.service_station.indexOf('服务站')>-1">{{good.delivery}}({{good.service_station}})</span>
                    <span ng-if="good.service_station.indexOf('服务站') <= -1">{{good.delivery}}</span>
                  </p>
                  <p ng-if="false">优惠券：{{good.coupons}}</p>
                  <p ng-if="good.address">订购小区：{{good.address}}</p>

                  <div class="note-message">
                    <p class="notetext">
                      <span ng-if="good.remark">备注：{{good.remark}}</span>
                    </p>

                    <p class="notetext" ng-show="good.error.length > 0">
                      <span>失效原因：<span class="myorder-goods-invalid">{{good.error}}</span></span>
                    </p>

                  </div>

                  <p class="allmoney order-goods-couponssum" ng-if="good.youhui != 0">优惠：&#165 {{good.youhui}}</p>

                </div>
              </div>
            </li>

          </ul>
        </div>
      </div>
      <div class="errMsg errBg" ng-if="errMsg">{{errMsg}}</div>
      <div class="navbar-fixed-bottom my-button-group ">
        <div class="button-group-left1">
          <p class="labletext"><span class="message-pic all-select-button">
        <img src="images/sure-icon.png" check-all data="{type : '全选',range : '.alsend-message-table'}"
             class="all"></span>全选</p>
        </div>

        <div class="button-group-right1">
          <div class="edit-group">
            <button type="button" class="btn btn-danger" ng-click="returnGoods('.alsend-message-table')">退货</button>
          </div>
          <div class="edit-group">
            <button type="button" class="btn btn-success" ng-click="confirmGoods('.alsend-message-table')">确认收货</button>
            <input type="hidden"/>
          </div>
        </div>

      </div>

    </div>

    <!-----------------------------------待退货------------------------------------------------>
    <div class="toback-message-table" ng-if="showType == '4'">
      <div class="toback-msg" ng-if="!errMsg" load-more data="{params : orderParams,repeatFun : '$scope.getOrders'}">
        <div>
          <ul class="list-group" ng-repeat="refundGood in orderList">

            <li class="list-group-item line order-basic-info">

              <div class="message-pic">
                <img src="images/sure-icon.png" class="sure order-status orderSure" check-all data="{type : '订单',range : '.toback-message-table'}">
                <span class="myOrder-orderId" ng-hide="true">{{refundGood.order_id}}</span>
              </div>

              <div class="order-message-text" ng-click="goOrderDetail(refundGood.order_id,$event)">
                <!--<p>-->
                  <!--{{refundGood.city}}<span class="myorder-shop">{{refundGood.business}}</span>-->
                  <!--<span class="order-status">{{refundGood.status}}</span>-->
                <!--</p>-->


                <div class="order-basic-second">
                  <p>
                    {{refundGood.city}}<span class="myorder-shop">{{refundGood.business}}</span>
                    <span class="order-status">{{refundGood.status}}</span>
                  </p>
                  <p class="secondChild"><span class="allmoney">&#165 {{refundGood.sum}}</span></p>
                </div>


                <div class="order-basic-second">
                  <p>订单号：<span class="order_no">{{refundGood.order_no}}</span></p>
                  <p class="secondChild" ng-hide="refundGood.youhui == 0">
                    <span class="allmoney">优惠：&#165 {{refundGood.youhui}}</span>
                  </p>
                </div>

                <div class="order-basic-second">
                  <p>下单时：{{refundGood.order_date}}</p>
                  <p class="secondChild" ng-hide="refundGood.shifu == 0">
                    <span class="allmoney">实付：&#165 {{refundGood.shifu}}</span>
                  </p>
                </div>


                <div class="order-basic-second">
                  <p class="">支付时：{{refundGood.pay_date}}</p>
                  <p class="secondChild" ng-hide="refundGood.hide_sum == 0">
                    <span class="allmoney">隐藏：&#165 {{refundGood.hide_sum}}</span>
                  </p>
                </div>

                <p class="" ng-if="refundGood.remark">备注：{{refundGood.remark}}</p>
              </div>
            </li>
            <li class="list-group-item" ng-repeat="good in refundGood.goods">
              <div class="myorder-selectedornot">

                <div class="message-pic">
                  <p>
                    <span class="good-status" ng-hide="true">{{good.status}}</span>
                    <img src="images/sure-icon.png" class="sure goodSure" check-good
                         data="{range : '.topay-message-table'}">
                    <span ng-hide="true" class="orderGoodsId">{{good.orderItem_id}}</span>
                  </p>
                  <span ng-hide="true">{{good}}</span>
                </div>

              </div>

              <div class="myorder-goods-info" ng-click="toGoodsDetail(good)">
                <div class="product-pic">
                  <img ng-src="{{good.imageUrl}}">
                </div>
                <div class="list-text">
                  <p class="product-name">
                    <span class="product-good">{{good.name}}</span>
                    <span class="station">{{good.status}}</span>
                  </p>

                  <div class="myorder-goods-sepc">
                    <span style="float:left">{{good.guige_1}}</span>
                    <span style="float:left">{{good.guige_2}}</span>
                  </div>
                  <div class="myorder-goods-pricecount">
                    <span class="price">&#165 {{good.sale_price}}</span>
                    <span class="myorder-count">X{{good.count}}{{good.unit}}</span>
                  </div>

                </div>

                <div class="size order-guige">
                  <p ng-if="good.delivery">送货方式：
                    <span ng-if ="good.service_station.indexOf('服务站')>-1">{{good.delivery}}({{good.service_station}})</span>
                    <span ng-if="good.service_station.indexOf('服务站') <= -1">{{good.delivery}}</span>
                  </p>
                  <p ng-if="false">优惠券：{{good.coupons}}</p>
                  <p ng-if="good.address">订购小区：{{good.address}}</p>

                  <div class="note-message">
                    <p class="notetext">
                      <span ng-if="good.remark">备注：{{good.remark}}</span>
                    </p>

                    <p class="notetext" ng-show="good.error.length > 0">
                      <span>失效原因：<span class="myorder-goods-invalid">{{good.error}}</span></span>
                    </p>
                  </div>

                  <p class="allmoney order-goods-couponssum" ng-if="good.youhui != 0">优惠：&#165 {{good.youhui}}</p>

                </div>
              </div>
            </li>

          </ul>
        </div>
      </div>
      <div class="errMsg errBg" ng-if="errMsg">{{errMsg}}</div>
      <div class="navbar-fixed-bottom my-button-group ">
        <div class="button-group-left1">
          <p class="labletext"><span class="message-pic all-select-button">
        <img src="images/sure-icon.png" check-all data="{type : '全选',range : '.toback-message-table'}"
             class="all"></span>全选</p>
        </div>

        <div class="button-group-right1">
          <div class="edit-group">
            <button type="button" class="btn btn-success button-cancel" ng-click="cancelReturn()">取消退货</button>
          </div>
        </div>

      </div>

    </div>

    <!--------------------------------------已完成------------------------------------------->
    <div class="finish-message-table" ng-if="showType == '5'">
      <div class="finish-msg" ng-if="!errMsg" load-more data="{params : orderParams,repeatFun : '$scope.getOrders'}">
        <div>
          <ul class="list-group" ng-repeat="finishGood in orderList">

            <li class="list-group-item line order-basic-info">

              <div class="message-pic">
                <img src="images/sure-icon.png" class="sure orderSure" check-all data="{type : '订单',range : '.finish-message-table'}">
                <span class="myOrder-orderId" ng-hide="true">{{finishGood.order_id}}</span>
              </div>

              <div class="order-message-text" ng-click="goOrderDetail(finishGood.order_id,$event)">
                <!--<p>-->
                  <!--{{finishGood.city}}<span class="myorder-shop">{{finishGood.business}}</span>-->
                  <!--<span class="order-status">{{finishGood.status}}</span>-->
                <!--</p>-->


                <div class="order-basic-second">
                  <p>
                    {{finishGood.city}}<span class="myorder-shop">{{finishGood.business}}</span>
                    <span class="order-status">{{finishGood.status}}</span>
                  </p>
                  <p class="secondChild">
                    <span class="allmoney">&#165 {{finishGood.sum}}</span>
                  </p>
                </div>



                <div class="order-basic-second">
                  <p class="">下单时：{{finishGood.order_date}}</p>
                  <p class="secondChild" ng-hide="finishGood.youhui == 0">
                    <span class="allmoney" >优惠：&#165 {{finishGood.youhui}}  </span>
                  </p>
                </div>


                <div class="order-basic-second">
                  <p class="">订单号：<span class="order_no">{{finishGood.order_no}}</span></p>
                  <p class="secondChild" ng-hide="finishGood.shifu == 0">
                    <span class="allmoney">实付：&#165 {{finishGood.shifu}}</span>
                  </p>
                </div>


                <div class="order-basic-second">
                  <p class="">支付时：{{finishGood.pay_date}}</p>
                  <p class="secondChild" ng-hide="finishGood.hide_sum == 0">
                    <span class="allmoney">隐藏：&#165 {{finishGood.hide_sum}}</span>
                  </p>
                </div>

                <p class="">完成时：{{finishGood.ok_date}}</p>

                <p class="" ng-if="finishGood.remark">{{finishGood.remark}}</p>
              </div>
            </li>
            <li class="list-group-item" ng-repeat="good in finishGood.goods">
              <div class="myorder-selectedornot">

                <div class="message-pic">
                  <p>
                    <span class="good-status" ng-hide="true">{{good.status}}</span>
                    <img src="images/sure-icon.png" class="sure goodSure" check-good
                         data="{range : '.topay-message-table'}">
                    <span ng-hide="true" class="orderGoodsId">{{good.orderItem_id}}</span>
                  </p>
                  <span ng-hide="true">{{good}}</span>
                </div>

              </div>
              <div class="myorder-goods-info" ng-click="toGoodsDetail(good)">
                <div class="product-pic">
                  <img ng-src="{{good.imageUrl}}">
                </div>
                <div class="list-text">
                  <p class="product-name">
                    <span class="product-good">{{good.name}}</span>
                    <span class="station">{{good.status}}</span>
                  </p>

                  <div class="myorder-goods-sepc">
                    <span style="float:left">{{good.guige_1}}</span>
                    <span style="float:left">{{good.guige_2}}</span>
                  </div>
                  <div class="myorder-goods-pricecount">
                    <span class="price">&#165 {{good.sale_price}}</span>
                    <span class="myorder-count">X{{good.count}}{{good.unit}}</span>
                  </div>

                </div>

                <div class="size order-guige">
                  <p ng-if="good.delivery">送货方式：
                    <span ng-if ="good.service_station.indexOf('服务站')>-1">{{good.delivery}}({{good.service_station}})</span>
                    <span ng-if="good.service_station.indexOf('服务站') <= -1">{{good.delivery}}</span>
                  </p>
                  <p ng-if="false">优惠券：{{good.coupons}}</p>
                  <p ng-if="good.address">订购小区：{{good.address}}</p>


                  <div class="note-message">
                    <p class="notetext">
                      <span ng-if="good.remark">备注：{{good.remark}}</span>
                    </p>

                    <p class="notetext" ng-show="good.error.length > 0">
                      <span>失效原因：<span class="myorder-goods-invalid">{{good.error}}</span></span>
                    </p>

                    <p class="allmoney order-goods-couponssum" ng-if="good.youhui != 0">优惠：&#165 {{good.youhui}}</p>

                    <p style="overflow: hidden">
                  <span style="float: left;width: 80%;text-align: right;color: red;"
                        ng-if="good.comment_content.length > 0">
                    {{good.comment_content}}
                  </span>
                      <button type="button" class="btn judge" ng-click="goJudge(good,finishGood.order_id)">评价
                      </button>
                    </p>

                  </div>

                </div>
              </div>
            </li>

          </ul>
        </div>
      </div>
      <div class="errMsg errBg" ng-if="errMsg">{{errMsg}}</div>
      <div class="navbar-fixed-bottom my-button-group ">
        <div class="button-group-left1">
          <p class="labletext"><span class="message-pic all-select-button">
        <img src="images/sure-icon.png" check-all data="{type : '全选',range : '.finish-message-table'}"
             class="all"></span>全选</p>
        </div>

        <div class="button-group-right1">

          <div class="edit-group myorder-finished-tabbar">
            <button type="button" class="btn btn-danger button-cancel myorder-button-delete"
                    ng-click="isSureDelete('.finish-message-table')">删除
            </button>
          </div>
          <div class="edit-group">
            <button type="button" class="btn btn-danger" ng-click="returnGoods('.finish-message-table')">退货</button>
          </div>
          <div class="edit-group">
            <button type="button" class="btn btn-success myorder-button-cancel-confirm-receive"
                    ng-click="cancelConfirm('.finish-message-table')">取消确认收货
            </button>
          </div>

        </div>

      </div>
    </div>

    <!--------------------------------------已退货------------------------------------------->
    <div class="alback-message-table" ng-if="showType == '6'">
      <div class="alback-msg" ng-if="!errMsg" load-more data="{params : orderParams,repeatFun : '$scope.getOrders'}">
        <div>
          <ul class="list-group" ng-repeat="finishRefund in orderList">

            <li class="list-group-item line order-basic-info">

              <div class="message-pic">
                <img src="images/sure-icon.png" class="sure orderSure" check-all data="{type : '订单',range : '.alback-message-table'}">
                <span class="myOrder-orderId" ng-hide="true">{{finishRefund.order_id}}</span>
              </div>

              <div class="order-message-text" ng-click="goOrderDetail(finishRefund.order_id,$event)">
                <!--<p>-->
                  <!--{{finishRefund.city}}<span class="myorder-shop">{{finishRefund.business}}</span>-->
                  <!--<span class="order-status">{{finishRefund.status}}</span>-->
                <!--</p>-->


                <div class="order-basic-second">
                  <p>
                    {{finishRefund.city}}<span class="myorder-shop">{{finishRefund.business}}</span>
                    <span class="order-status">{{finishRefund.status}}</span>
                  </p>
                  <p class="secondChild">
                    <span class="allmoney">&#165 {{finishRefund.sum}}</span>
                  </p>
                </div>


                <div class="order-basic-second">
                  <p>订单号：<span class="order_no">{{finishRefund.order_no}}</span></p>
                  <p class="secondChild" ng-hide="finishRefund.youhui == 0">
                    <span class="allmoney">优惠：&#165 {{finishRefund.youhui}}</span>
                  </p>
                </div>


                <div class="order-basic-second">
                  <p>下单时：{{finishRefund.order_date}}</p>
                  <p class="secondChild" ng-hide="finishRefund.shifu == 0">
                    <span class="allmoney">实付：&#165 {{finishRefund.shifu}}</span>
                  </p>
                </div>


                <div class="order-basic-second">
                  <p>支付时：{{finishRefund.pay_date}}</p>
                  <p class="secondChild" ng-hide="finishRefund.hide_sum == 0">
                    <span class="allmoney">隐藏额：&#165 {{finishRefund.hide_sum}}</span>
                  </p>
                </div>

                <p class="" ng-if="finishRefund.remark">备注：{{finishRefund.remark}}</p>
              </div>
            </li>
            <li class="list-group-item" ng-repeat="good in finishRefund.goods">
              <div class="myorder-selectedornot">

                <div class="message-pic">
                  <p>
                    <span class="good-status" ng-hide="true">{{good.status}}</span>
                    <img src="images/sure-icon.png" class="sure goodSure" check-good
                         data="{range : '.topay-message-table'}">
                    <span ng-hide="true" class="orderGoodsId">{{good.orderItem_id}}</span>
                  </p>
                  <span ng-hide="true">{{good}}</span>
                </div>

              </div>
              <div class="myorder-goods-info" ng-click="toGoodsDetail(good)">
                <div class="product-pic">
                  <img ng-src="{{good.imageUrl}}">
                </div>
                <div class="list-text">
                  <p class="product-name">
                    <span class="product-good">{{good.name}}</span>
                    <span class="station">{{good.status}}</span>
                  </p>

                  <div class="myorder-goods-sepc">
                    <span style="float:left">{{good.guige_1}}</span>
                    <span style="float:left">{{good.guige_2}}</span>
                  </div>
                  <div class="myorder-goods-pricecount">
                    <span class="price">&#165 {{good.sale_price}}</span>
                    <span class="myorder-count">X{{good.count}}{{good.unit}}</span>
                  </div>

                </div>

                <div class="size order-guige">
                  <p ng-if="good.delivery">送货方式：
                    <span ng-if ="good.service_station.indexOf('服务站')>-1">{{good.delivery}}({{good.service_station}})</span>
                    <span ng-if="good.service_station.indexOf('服务站') <= -1">{{good.delivery}}</span>
                  </p>
                  <p ng-if="false">优惠券：{{good.coupons}}</p>
                  <p ng-if="good.address">订购小区：{{good.address}}</p>


                  <div class="note-message">
                    <p class="notetext">
                      <span ng-if="good.remark">备注：{{good.remark}}</span>
                    </p>

                    <p class="notetext" ng-show="good.error.length > 0">
                      <span>失效原因：<span class="myorder-goods-invalid">{{good.error}}</span></span>
                    </p>

                  </div>

                  <p class="allmoney order-goods-couponssum" ng-if="good.youhui != 0">优惠：&#165 {{good.youhui}}</p>

                </div>
              </div>
            </li>


          </ul>
        </div>
      </div>
      <div class="errMsg errBg" ng-if="errMsg">{{errMsg}}</div>
      <div class="navbar-fixed-bottom my-button-group">
        <div class="button-group-left1">
          <p class="labletext"><span class="message-pic all-select-button">
        <img src="images/sure-icon.png" check-all data="{type : '全选',range : '.alback-message-table'}"
             class="all"></span>全选</p>
        </div>

        <div class="button-group-right1">
          <div class="edit-group">
            <button type="button" class="btn btn-danger button-cancel"
                    ng-click="isSureDelete('.alback-message-table')">删除
            </button>
          </div>
        </div>
      </div>
    </div>
    <!-------------------------------------全部-------------------------------------------- -->
    <div class="all-message-table" ng-if="showType == '7'">
      <div class="all-msg" ng-if="!errMsg" load-more data="{params : orderParams,repeatFun : '$scope.getOrders'}">
        <div>
          <ul class="list-group" ng-repeat="myorder in orderList">

            <li class="list-group-item line order-basic-info">

              <div class="message-pic">
                <img src="images/sure-icon.png" class="sure orderSure" check-all data="{type : '订单',range : '.all-message-table'}">
                <span class="myOrder-orderId" ng-hide="true">{{myorder.order_id}}</span>
              </div>

              <div class="order-message-text" ng-click="goOrderDetail(myorder.order_id,$event)">

                <div class="order-basic-second">
                  <p>
                    {{myorder.city}}<span class="myorder-shop">{{myorder.business}}</span>
                  </p>
                  <p class="secondChild">
                    <span class="allmoney">&#165 {{myorder.sum}}</span>
                  </p>
                </div>


                <div class="order-basic-second">
                  <p>订单号：<span class="order_no">{{myorder.order_no}}</span></p>
                  <p class="secondChild" ng-hide="myorder.youhui == 0">
                    <span class="allmoney">优惠：&#165 {{myorder.youhui}}  </span>
                  </p>
                </div>


                <div class="order-basic-second">
                  <p>下单时：{{myorder.order_date}}</p>
                  <p class="secondChild" ng-hide="myorder.shifu == 0">
                    <span class="allmoney">&#165{{myorder.shifu}}</span>
                  </p>
                </div>

                <div class="order-basic-second">
                  <p>支付时：{{myorder.pay_date}}</p>
                  <p class="secondChild" ng-hide="myorder.hide_sum == 0">
                    <span class="allmoney">隐藏额：&#165{{myorder.hide_sum}}</span>
                  </p>
                </div>

                <p>完成时：{{myorder.ok_date}}</p>

                <p ng-if="myorder.remark">备注：{{myorder.remark}}</p>

              </div>
            </li>
            <li class="list-group-item" ng-repeat="good in myorder.goods">
              <div class="myorder-selectedornot">

                <div class="message-pic">
                  <p>
                    <span class="good-status" ng-hide="true">{{good.status}}</span>
                    <img src="images/sure-icon.png" class="sure goodSure" check-good
                         data="{range : '.topay-message-table'}">
                    <span ng-hide="true" class="orderGoodsId">{{good.orderItem_id}}</span>
                  </p>
                  <span ng-hide="true">{{good}}</span>
                </div>

              </div>

              <div class="myorder-goods-info" ng-click="toGoodsDetail(good)">
                <div class="product-pic">
                  <img ng-src="{{good.imageUrl}}">
                </div>
                <div class="list-text">
                  <p class="product-name">
                    <span class="product-good">{{good.name}}</span>
                    <span class="station">{{good.status}}</span>
                  </p>

                  <div class="myorder-goods-sepc">
                    <span style="float:left">{{good.guige_1}}</span>
                    <span style="float:left">{{good.guige_2}}</span>
                  </div>
                  <div class="myorder-goods-pricecount">
                    <p class="price">&#165 {{good.sale_price}}</p>
                    <p class="myorder-count">X{{good.count}}{{good.unit}}</p>
                  </div>

                </div>

                <div class="size order-guige">
                  <p ng-if="good.delivery">送货方式：
                    <span ng-if ="good.service_station.indexOf('服务站')>-1">{{good.delivery}}({{good.service_station}})</span>
                    <span ng-if="good.service_station.indexOf('服务站') <= -1">{{good.delivery}}</span>
                  </p>
                  <p ng-if="false">优惠券：{{good.coupons}}</p>
                  <p ng-if="good.address">订购小区：{{good.address}}</p>


                  <div class="note-message">
                    <p class="notetext">
                      <span ng-if="good.remark">备注：{{good.remark}}</span>
                    </p>

                    <p class="notetext" ng-show="good.error.length > 0">
                      <span>失效原因：<span class="myorder-goods-invalid">{{good.error}}</span></span>
                    </p>

                    <p class="allmoney order-goods-couponssum" ng-if="good.youhui != 0">优惠：&#165 {{good.youhui}}</p>

                    <p style="overflow: hidden" ng-if="good.status == '已完成'">
                  <span style="float: left;width: 80%;text-align: right;color: red;"
                        ng-if="good.comment_content.length > 0">
                    {{good.comment_content}}
                  </span>
                      <button type="button" class="btn judge" ng-click="goJudge(good,finishGood.order_id)">评价
                      </button>
                    </p>

                  </div>

                </div>
              </div>
            </li>


          </ul>
        </div>
      </div>
      <div class="errMsg errBg" ng-if="errMsg">{{errMsg}}</div>

      <div class="navbar-fixed-bottom my-button-group">
        <div class="button-group-left1">
          <p class="labletext"><span class="message-pic all-select-button">
        <img src="images/sure-icon.png" check-all data="{type : '全选',range : '.all-message-table'}" class="all"></span>全选
          </p>
        </div>

        <div class="button-group-right1">
          <div class="edit-group">
            <button type="button" class="btn btn-success" ng-click="goToPay('.all-message-table')">支付</button>
          </div>
          <div class="edit-group">
            <button type="button" class=" btn btn-danger" ng-click="isSureDelete('.all-message-table')">删除</button>
          </div>
          <div class="edit-group">
            <button type="button" class="btn btn-success" ng-click="confirmGoods('.all-message-table')">确认收货</button>
            <input type="hidden"/>
          </div>
        </div>
      </div>

    </div>
  </div>
</div>


<div class="modal fade" id="ensureModal">
  <div class="modal-dialog">
    <div class="modal-content">
      <div class="modal-header">
        <button type="button" class="close" data-dismiss="modal">
          <span aria-hidden="true">&times;</span>
        </button>
        <h4 class="modal-title">我的订单</h4>
      </div>
      <div class="modal-body">
        <p style="font-size:1.3rem">{{tipsMessage}}</p>

      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-default" data-dismiss="modal">取消</button>
        <button type="button" class="btn btn-primary" ng-click="sureAction(code)">确定</button>
      </div>
    </div>
  </div>
</div>


<script>
  var screenWidth = $(window).width();
  $('.list-text').css({
    'width':screenWidth - 125 + 'px'
  })
</script>
